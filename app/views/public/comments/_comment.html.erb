<% if post.comments.present? %>
  <div class="m-3"><%= flash[:notice] %></div>
  <% post.comments.each do |comment| %>
    <div class="container border mb-3">
      <div class="row p-3">
        <div class="col-5">
          <div class="text-left">
            <p><%= safe_join(comment.comment.split("\n"),tag(:br)) %></p>
          </div>
        </div>
      </div>
      <div class="row p-3 d-flex justify-content-end">
        <div class="d-flex justify-content-end col-4">
          <p><%= comment.created_at.strftime('%Y/%m/%d') %></p>
          <div>
            BY
            <%= link_to user_path(comment.user) do %>
              <%= image_tag comment.user.get_profile_image(50,50) %>
            <% end %>
          </div>
          <div>
            <%= link_to user_path(comment.user) do %>
              <%= comment.user.name %>
            <% end %>
          </div>
        </div>
        <div class="col-1">
          <!--コメントしたユーザーか管理人が削除可能-->
          <% if comment.user == current_user %>
            <%= link_to "削除", post_comment_path(comment.post, comment), method: :delete, remote: true, class: "btn btn-danger", "data-confirm" => "本当に削除しますか？" %>
          <% elsif admin_signed_in? %>
            <%= link_to "削除", post_comment_path(comment.post, comment), method: :delete, remote: true, class: "btn btn-danger", "data-confirm" => "本当に削除しますか？" %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
<% else %>
  <p>コメントはありません</p>
<% end %>